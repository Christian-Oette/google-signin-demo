<!DOCTYPE html>
<html>

<!--Example for javascript bootstrap sign in.-->
<!--You won't need the JS libraries if you use redirect urls, generated by backend.-->

<head>
    <meta charset="utf-8">
    <title>Google SignIn Tutorial</title>
    <meta name="description" content="This is an example of a meta description.">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,400;1,600&display=swap" rel="stylesheet">

    <meta name="google-signin-scope" content="profile email">
    <meta name="google-signin-client_id"
          content="458979622087-4k57na2hv3ojj5k7lkqkk5lm54bnqfvr.apps.googleusercontent.com">
    <script src="https://apis.google.com/js/platform.js" async defer></script>
</head>
<body>
<div class="container">
    <div class="login">
        <div class="content">
            <form method="GET" action="/auth/redirect">
                <H1>Welcome</H1>
                <H3>Login to get started!</H3>

                <div>
                    <input class="text-input" type="text" placeholder="E-Mail">
                </div>

                <div>
                    <input class="text-input" type="text" placeholder="Password">
                </div>
                <div>
                    <button>Login</button>


                    <button class="primary">Sign in with redirect to Google</button>

                </div>
            </form>

            <div class="g-signin2" data-onsuccess="onSignIn">Sigin In</div>

            <p id="name"></p>
            <a href="#" id="tokenLink"></a>
        </div>

    </div>
</div>
<div class="credit">
    <a style="background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &quot;San Francisco&quot;, &quot;Helvetica Neue&quot;, Helvetica, Ubuntu, Roboto, Noto, &quot;Segoe UI&quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px"
       href="https://unsplash.com/@lucabravo?utm_medium=referral&amp;utm_campaign=photographer-credit&amp;utm_content=creditBadge"
       target="_blank" rel="noopener noreferrer"
       title="Download free do whatever you want high-resolution photos from Luca Bravo"><span
            style="display:inline-block;padding:2px 3px"><svg xmlns="http://www.w3.org/2000/svg"
                                                              style="height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white"
                                                              viewBox="0 0 32 32"><title>unsplash-logo</title><path
            d="M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z"></path></svg></span><span
            style="display:inline-block;padding:2px 3px">Image by Luca Bravo</span></a>
</div>

</body>
<script>
    function onSignIn(googleUser) {
        const profile = googleUser.getBasicProfile()
        console.table(profile);

        const id_token = googleUser.getAuthResponse().id_token;
        const name = profile.getName(0);

        document.getElementById("name").innerHTML = `Your browser is signed in at google as ${name}`;
        document.getElementById("tokenLink").href = `http://localhost:8080/auth/token/${id_token}`;
        document.getElementById("tokenLink").innerHTML = `send token to backend`;

        // TODO send token via POST to backend!
    }
</script>
</html>